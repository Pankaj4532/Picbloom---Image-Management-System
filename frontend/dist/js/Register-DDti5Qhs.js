import{r as a,u as w,j as e,G as i,S as j,T as u,L as v}from"./index-8HAMVEHB.js";import{C as y,A}from"./AuthWrapper-DRnSgvd7.js";import{h as E}from"./client-BDR7rpum.js";import{T as m}from"./TextField-XHbNzIif.js";import{B as S}from"./Button-DrrtKREI.js";const b=()=>{const[o,g]=a.useState(""),[t,h]=a.useState(""),[s,n]=a.useState({email:"",password:""}),[l,c]=a.useState(""),d=w();a.useEffect(()=>{localStorage.getItem("token")&&(d("/"),window.location.reload())},[]);const p=()=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o),x=()=>t.length>=8&&t.length<=20,f=async()=>{if(n({email:"",password:""}),!p()){n(r=>({...r,email:"Invalid email format"}));return}if(!x()){n(r=>({...r,password:"Password must be at least 8 characters."}));return}E("/auth/users/add",{email:o,password:t}).then(()=>{c(""),d("/login"),window.location.reload()}).catch(r=>{console.error("Login error: ",r),c("An error occured during login")})};return e.jsxs(y,{component:"main",maxWidth:"xs",children:[e.jsx(m,{variant:"outlined",margin:"normal",fullWidth:!0,label:"email",value:o,onChange:r=>g(r.target.value),error:!!s.email,helperText:s.email}),e.jsx(m,{variant:"outlined",margin:"normal",fullWidth:!0,label:"password",type:"password",value:t,onChange:r=>h(r.target.value),error:!!s.password,helperText:s.password}),e.jsx(S,{variant:"contained",color:"primary",fullWidth:!0,onClick:f,children:"Register"}),l&&e.jsx("p",{style:{color:"red"},children:l})]})};function I(){return e.jsx(A,{children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{size:12,children:e.jsxs(j,{direction:"row",sx:{alignItems:"baseline",justifyContent:"space-between",mb:{xs:-.5,sm:.5}},children:[e.jsx(u,{variant:"h3",children:"Sign up"}),e.jsx(u,{component:v,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Already have an account?"})]})}),e.jsx(i,{size:12,children:e.jsx(b,{})})]})})}export{I as default};
//# sourceMappingURL=Register-DDti5Qhs.js.map
