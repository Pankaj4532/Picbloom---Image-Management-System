{"version":3,"file":"albumEdit-C9YT2iz-.js","sources":["../../src/pages/albums/albumEdit.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { Button, TextField } from \"@mui/material\";\nimport { fetchPutDataWithAuth, fetchGetDataWithAuth } from \"client/client\";\n\nconst EditAlbumform = () => {\n  const navigate = useNavigate();\n\n    const location = useLocation();\n    const queryParams = new URLSearchParams(location.search);\n    const album_id = queryParams.get('id'); // Extract album_id from url query params\n\n  useEffect(() => {\n    const isLoggedIn = localStorage.getItem(\"token\");\n    if (!isLoggedIn) {\n      navigate(\"/login\");\n    }\n    fetchGetDataWithAuth(\"/albums/\"+album_id)\n          .then(res =>{\n            if(res.data){\n              setFormData(prevFormData =>({\n                ...prevFormData,\n                name:res.data.name,\n                description:res.data.description\n              }))\n            }\n          })\n  }, [navigate]);\n\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n  });\n  const [errors, setErrors] = useState({\n    name: \"\",\n    description: \"\",\n  });\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    //Validation\n    let isValid = true;\n    const newErrors = { name: \"\", description: \"\" };\n\n    if (!formData.name.trim()) {\n      newErrors.name = \"Name is required\";\n      isValid = false;\n    }\n\n    if (!formData.description.trim()) {\n      newErrors.description = \"Description is required\";\n      isValid = false;\n    }\n\n    setErrors(newErrors);\n\n    // If form is valid, you can proceed with further actions\n\n    if (isValid) {\n      const payload = {\n        name: formData.name,\n        description: formData.description,\n      };\n      try {\n        const response = await fetchPutDataWithAuth(\"/albums/\"+album_id+\"/update\", payload);\n        console.log(\"Album Created\", response);\n        navigate(\"/albums\");\n      } catch (error) {\n        console.error(\"Album creation error:\", error);\n      }\n    }\n  };\n  return (\n    <form onSubmit={handleSubmit}>\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        fullWidth\n        label=\"name\"\n        name=\"name\"\n        value={formData.name}\n        onChange={handleInputChange}\n        error={!!errors.name}\n        helperText={errors.name}\n      />\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        fullWidth\n        label=\"description\"\n        name=\"description\"\n        value={formData.description}\n        onChange={handleInputChange}\n        error={!!errors.description}\n        helperText={errors.description}\n        multiline\n        rows={4}\n      />\n      <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n        Edit Album\n      </Button>\n    </form>\n  );\n};\nexport default EditAlbumform;\n"],"names":["EditAlbumform","navigate","useNavigate","location","useLocation","album_id","useEffect","fetchGetDataWithAuth","res","setFormData","prevFormData","formData","useState","errors","setErrors","handleInputChange","e","name","value","prevData","handleSubmit","isValid","newErrors","payload","response","fetchPutDataWithAuth","error","jsxs","jsx","TextField","Button"],"mappings":"kMAKA,MAAMA,EAAgB,IAAM,CAC1B,MAAMC,EAAWC,EAAA,EAETC,EAAWC,EAAA,EAEXC,EADc,IAAI,gBAAgBF,EAAS,MAAM,EAC1B,IAAI,IAAI,EAEvCG,EAAAA,UAAU,IAAM,CACK,aAAa,QAAQ,OAAO,GAE7CL,EAAS,QAAQ,EAEnBM,EAAqB,WAAWF,CAAQ,EACjC,KAAKG,GAAM,CACPA,EAAI,MACLC,EAAYC,IAAgB,CAC1B,GAAGA,EACH,KAAKF,EAAI,KAAK,KACd,YAAYA,EAAI,KAAK,WAAA,EACrB,CAEN,CAAC,CACT,EAAG,CAACP,CAAQ,CAAC,EAEb,KAAM,CAACU,EAAUF,CAAW,EAAIG,WAAS,CACvC,KAAM,GACN,YAAa,EAAA,CACd,EACK,CAACC,EAAQC,CAAS,EAAIF,WAAS,CACnC,KAAM,GACN,YAAa,EAAA,CACd,EAEKG,EAAqBC,GAAM,CAC/B,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAA,EAAUF,EAAE,OAC1BP,EAAaU,IAAc,CACzB,GAAGA,EACH,CAACF,CAAI,EAAGC,CAAA,EACR,CACJ,EAEME,EAAe,MAAOJ,GAAM,CAChCA,EAAE,eAAA,EAGF,IAAIK,EAAU,GACd,MAAMC,EAAY,CAAE,KAAM,GAAI,YAAa,EAAA,EAgB3C,GAdKX,EAAS,KAAK,SACjBW,EAAU,KAAO,mBACjBD,EAAU,IAGPV,EAAS,YAAY,SACxBW,EAAU,YAAc,0BACxBD,EAAU,IAGZP,EAAUQ,CAAS,EAIfD,EAAS,CACX,MAAME,EAAU,CACd,KAAMZ,EAAS,KACf,YAAaA,EAAS,WAAA,EAExB,GAAI,CACF,MAAMa,EAAW,MAAMC,EAAqB,WAAWpB,EAAS,UAAWkB,CAAO,EAClF,QAAQ,IAAI,gBAAiBC,CAAQ,EACrCvB,EAAS,SAAS,CACpB,OAASyB,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC9C,CACF,CACF,EACA,OACEC,EAAAA,KAAC,OAAA,CAAK,SAAUP,EACd,SAAA,CAAAQ,EAAAA,IAACC,EAAA,CACC,QAAQ,WACR,OAAO,SACP,UAAS,GACT,MAAM,OACN,KAAK,OACL,MAAOlB,EAAS,KAChB,SAAUI,EACV,MAAO,CAAC,CAACF,EAAO,KAChB,WAAYA,EAAO,IAAA,CAAA,EAErBe,EAAAA,IAACC,EAAA,CACC,QAAQ,WACR,OAAO,SACP,UAAS,GACT,MAAM,cACN,KAAK,cACL,MAAOlB,EAAS,YAChB,SAAUI,EACV,MAAO,CAAC,CAACF,EAAO,YAChB,WAAYA,EAAO,YACnB,UAAS,GACT,KAAM,CAAA,CAAA,EAERe,EAAAA,IAACE,GAAO,QAAQ,YAAY,MAAM,UAAU,KAAK,SAAS,SAAA,YAAA,CAE1D,CAAA,EACF,CAEJ"}