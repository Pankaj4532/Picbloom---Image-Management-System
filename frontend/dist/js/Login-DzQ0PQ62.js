import{r,u as j,j as t,G as i,S as v,T as m,L}from"./index-8HAMVEHB.js";import{C as y,A as b}from"./AuthWrapper-DRnSgvd7.js";import{h as E}from"./client-BDR7rpum.js";import{T as u}from"./TextField-XHbNzIif.js";import{B as S}from"./Button-DrrtKREI.js";const k=()=>{const[s,g]=r.useState(""),[a,h]=r.useState(""),[o,n]=r.useState({email:"",password:""}),[l,c]=r.useState(""),d=j();r.useEffect(()=>{localStorage.getItem("token")&&(d("/"),window.location.reload())},[]);const p=()=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s),x=()=>a.length>=8&&a.length<=20,f=async()=>{if(n({email:"",password:""}),!p()){n(e=>({...e,email:"Invalid email format"}));return}if(!x()){n(e=>({...e,password:"Password must be at least 8 characters."}));return}E("/auth/token",{email:s,password:a}).then(e=>{const{token:w}=e.data;c(""),localStorage.setItem("token",w),d("/albums"),window.location.reload()}).catch(e=>{console.error("Login error: ",e),c("An error occured during login")})};return t.jsxs(y,{component:"main",maxWidth:"xs",children:[t.jsx(u,{variant:"outlined",margin:"normal",fullWidth:!0,label:"email",value:s,onChange:e=>g(e.target.value),error:!!o.email,helperText:o.email}),t.jsx(u,{variant:"outlined",margin:"normal",fullWidth:!0,label:"password",type:"password",value:a,onChange:e=>h(e.target.value),error:!!o.password,helperText:o.password}),t.jsx(S,{variant:"contained",color:"primary",fullWidth:!0,onClick:f,children:"Login"}),l&&t.jsx("p",{style:{color:"red"},children:l})]})};function W(){return t.jsx(b,{children:t.jsxs(i,{container:!0,spacing:3,children:[t.jsx(i,{size:12,children:t.jsxs(v,{direction:"row",sx:{alignItems:"baseline",justifyContent:"space-between",mb:{xs:-.5,sm:.5}},children:[t.jsx(m,{variant:"h3",children:"Login"}),t.jsx(m,{component:L,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Don't have an account?"})]})}),t.jsx(i,{size:12,children:t.jsx(k,{})})]})})}export{W as default};
//# sourceMappingURL=Login-DzQ0PQ62.js.map
