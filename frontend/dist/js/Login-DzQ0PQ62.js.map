{"version":3,"file":"Login-DzQ0PQ62.js","sources":["../../src/sections/auth/AuthLogin.jsx","../../src/pages/auth/Login.jsx"],"sourcesContent":["import { Button } from '@mui/material';\nimport { TextField } from '@mui/material';\nimport { Container } from '@mui/material';\nimport {fetchPostData} from 'client/client'\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useEffect } from 'react';\n// ============================|| LOGIN ||============================ //\n\nconst AuthLogin = () =>{\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState({email: '', password: ''});\n  const [loginError, setLoginError] = useState('');\n  const navigate = useNavigate(); \n\n  useEffect(()=>{\n    const isLoggedIn = localStorage.getItem('token');\n    if(isLoggedIn){\n      navigate('/');\n      window.location.reload()\n\n    }\n  },[]);// the empty array dependency ensures that the effect runs only once, on mount\n\n\n\n\n  const validateEmail = () =>{\n    //Basic email format validation\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    return emailRegex.test(email);\n  };\n\n  const validatePassword = () =>{\n    //Basic Password length validation\n    return password.length >= 8 && password.length <=20;\n  };\n\n  const handleLogin = async () =>{\n    //Reset Previous Errors\n    setErrors({email: '', password: ''});\n\n\n    //validation\n    if(!validateEmail()){\n      setErrors((prevErrors) =>({ ...prevErrors, email: 'Invalid email format'}));\n      return;\n    }\n\n    if(!validatePassword()){\n      setErrors((prevErrors) => ({ ...prevErrors, password: 'Password must be at least 8 characters.'}));\n      return;\n    }\n\n    //adding login logic here\n\n    fetchPostData(\"/auth/token\",{email,password})\n                  .then((response) =>{\n                    const {token} =response.data;\n                    setLoginError('');\n                    localStorage.setItem('token',token);\n                     navigate('/albums');\n                    window.location.reload()\n\n                  }).catch((error)=>{\n                  console.error('Login error: ',error);\n\n                    //Handle Other Login errors\n                    setLoginError('An error occured during login');\n                  });\n\n  };\n\n\n  return(\n    <Container component=\"main\" maxWidth=\"xs\">\n      <TextField variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                label=\"email\"\n                value={email}\n                onChange={(e)=>setEmail(e.target.value)}\n                error={!!errors.email}\n                helperText={errors.email}\n                />\n      <TextField variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                label=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e)=>setPassword(e.target.value)}\n                error={!!errors.password}\n                helperText={errors.password}\n                />\n      <Button variant = \"contained\" color=\"primary\" fullWidth onClick={handleLogin}>\n        Login\n      </Button>\n      {loginError && <p style={{color:'red'}}>{loginError}</p>}\n\n\n    </Container>\n  );\n}\n\n\nexport default AuthLogin;","import { Link } from 'react-router-dom';\n\n// material-ui\nimport Grid from '@mui/material/Grid';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\n\n// project imports\nimport AuthWrapper from 'sections/auth/AuthWrapper';\nimport AuthLogin from 'sections/auth/AuthLogin';\n\n// ================================|| JWT - LOGIN ||================================ //\n\nexport default function Login() {\n  return (\n    <AuthWrapper>\n      <Grid container spacing={3}>\n        <Grid size={12}>\n          <Stack direction=\"row\" sx={{ alignItems: 'baseline', justifyContent: 'space-between', mb: { xs: -0.5, sm: 0.5 } }}>\n            <Typography variant=\"h3\">Login</Typography>\n            <Typography component={Link} to={'/register'} variant=\"body1\" sx={{ textDecoration: 'none' }} color=\"primary\">\n              Don&apos;t have an account?\n            </Typography>\n          </Stack>\n        </Grid>\n        <Grid size={12}>\n          <AuthLogin />\n        </Grid>\n      </Grid>\n    </AuthWrapper>\n  );\n}\n"],"names":["AuthLogin","email","setEmail","useState","password","setPassword","errors","setErrors","loginError","setLoginError","navigate","useNavigate","useEffect","validateEmail","validatePassword","handleLogin","prevErrors","fetchPostData","response","token","error","jsxs","Container","jsx","TextField","Button","Login","AuthWrapper","Grid","Stack","Typography","Link"],"mappings":"2PASA,MAAMA,EAAY,IAAK,CACrB,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAE,EACrC,CAACG,EAAQC,CAAS,EAAIJ,EAAAA,SAAS,CAAC,MAAO,GAAI,SAAU,GAAG,EACxD,CAACK,EAAYC,CAAa,EAAIN,EAAAA,SAAS,EAAE,EACzCO,EAAWC,EAAA,EAEjBC,EAAAA,UAAU,IAAI,CACO,aAAa,QAAQ,OAAO,IAE7CF,EAAS,GAAG,EACZ,OAAO,SAAS,OAAA,EAGpB,EAAE,CAAA,CAAE,EAKJ,MAAMG,EAAgB,IAED,mDACD,KAAKZ,CAAK,EAGxBa,EAAmB,IAEhBV,EAAS,QAAU,GAAKA,EAAS,QAAS,GAG7CW,EAAc,SAAW,CAM7B,GAJAR,EAAU,CAAC,MAAO,GAAI,SAAU,GAAG,EAIhC,CAACM,IAAgB,CAClBN,EAAWS,IAAe,CAAE,GAAGA,EAAY,MAAO,wBAAwB,EAC1E,MACF,CAEA,GAAG,CAACF,IAAmB,CACrBP,EAAWS,IAAgB,CAAE,GAAGA,EAAY,SAAU,2CAA2C,EACjG,MACF,CAIAC,EAAc,cAAc,CAAC,MAAAhB,EAAM,SAAAG,CAAA,CAAS,EAC7B,KAAMc,GAAY,CACjB,KAAM,CAAC,MAAAC,GAAQD,EAAS,KACxBT,EAAc,EAAE,EAChB,aAAa,QAAQ,QAAQU,CAAK,EACjCT,EAAS,SAAS,EACnB,OAAO,SAAS,OAAA,CAElB,CAAC,EAAE,MAAOU,GAAQ,CAClB,QAAQ,MAAM,gBAAgBA,CAAK,EAGjCX,EAAc,+BAA+B,CAC/C,CAAC,CAEjB,EAGA,OACEY,EAAAA,KAACC,EAAA,CAAU,UAAU,OAAO,SAAS,KACnC,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAU,QAAQ,WACT,OAAO,SACP,UAAS,GACT,MAAM,QACN,MAAOvB,EACP,SAAW,GAAIC,EAAS,EAAE,OAAO,KAAK,EACtC,MAAO,CAAC,CAACI,EAAO,MAChB,WAAYA,EAAO,KAAA,CAAA,EAE7BiB,EAAAA,IAACC,EAAA,CAAU,QAAQ,WACT,OAAO,SACP,UAAS,GACT,MAAM,WACN,KAAK,WACL,MAAOpB,EACP,SAAW,GAAIC,EAAY,EAAE,OAAO,KAAK,EACzC,MAAO,CAAC,CAACC,EAAO,SAChB,WAAYA,EAAO,QAAA,CAAA,EAE7BiB,EAAAA,IAACE,EAAA,CAAO,QAAU,YAAY,MAAM,UAAU,UAAS,GAAC,QAASV,EAAa,SAAA,OAAA,CAE9E,EACCP,SAAe,IAAA,CAAE,MAAO,CAAC,MAAM,KAAA,EAAS,SAAAA,CAAA,CAAW,CAAA,EAGtD,CAEJ,EC3FA,SAAwBkB,GAAQ,CAC9B,aACGC,EAAA,CACC,SAAAN,EAAAA,KAACO,GAAK,UAAS,GAAC,QAAS,EACvB,SAAA,CAAAL,EAAAA,IAACK,EAAA,CAAK,KAAM,GACV,SAAAP,EAAAA,KAACQ,GAAM,UAAU,MAAM,GAAI,CAAE,WAAY,WAAY,eAAgB,gBAAiB,GAAI,CAAE,GAAI,IAAM,GAAI,EAAA,GACxG,SAAA,CAAAN,EAAAA,IAACO,EAAA,CAAW,QAAQ,KAAK,SAAA,QAAK,EAC9BP,EAAAA,IAACO,EAAA,CAAW,UAAWC,EAAM,GAAI,YAAa,QAAQ,QAAQ,GAAI,CAAE,eAAgB,MAAA,EAAU,MAAM,UAAU,SAAA,wBAAA,CAE9G,CAAA,CAAA,CACF,CAAA,CACF,QACCH,EAAA,CAAK,KAAM,GACV,SAAAL,EAAAA,IAACvB,IAAU,CAAA,CACb,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}