{"version":3,"file":"photoEdit-CBJ-vQFP.js","sources":["../../src/pages/albums/photoEdit.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { Button, TextField } from \"@mui/material\";\nimport { fetchPutDataWithAuth } from \"client/client\";\n\nconst EditPhotoForm = () => {\n  const navigate = useNavigate();\n\n    const location = useLocation();\n    const queryParams = new URLSearchParams(location.search);\n    const album_id = queryParams.get('album_id'); // Extract album_id from url query params\n    const photo_id = queryParams.get('photo_id');\n    const photo_name = queryParams.get('photo_name');\n    let photo_desc = queryParams.get('photo_desc');\n\n  useEffect(() => {\n    const isLoggedIn = localStorage.getItem(\"token\");\n    if (!isLoggedIn) {\n      navigate(\"/login\");\n    }\n   \n    setFormData(prevFormData =>({\n      ...prevFormData,\n      name: photo_name || \"\",\n      description: photo_desc === \"null\" ? \"\" : photo_desc || \"\",\n    }));\n  }, [navigate, photo_name, photo_desc]);\n\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n  });\n  const [errors, setErrors] = useState({\n    name: \"\",\n    description: \"\",\n  });\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    //Validation\n    let isValid = true;\n    const newErrors = { name: \"\", description: \"\" };\n\n    if (!formData.name.trim()) {\n      newErrors.name = \"Name is required\";\n      isValid = false;\n    }\n\n    if (!formData.description.trim()) {\n      newErrors.description = \"Description is required\";\n      isValid = false;\n    }\n\n    setErrors(newErrors);\n\n    // If form is valid, you can proceed with further actions\n\n    if (isValid) {\n      const payload = {\n        name: formData.name,\n        description: formData.description,\n      };\n      try {\n        const response= await fetchPutDataWithAuth(\"/albums/\"+album_id+\"/photos/\"+photo_id+\"/update-photos\", payload);\n        console.log(\"Album Created\", response);\n        navigate(\"/albums\");\n      } catch (error) {\n        console.error(\"Album creation error:\", error);\n      }\n    }\n  };\n  return (\n    <form onSubmit={handleSubmit}>\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        fullWidth\n        label=\"name\"\n        name=\"name\"\n        value={formData.name}\n        onChange={handleInputChange}\n        error={!!errors.name}\n        helperText={errors.name}\n      />\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        fullWidth\n        label=\"description\"\n        name=\"description\"\n        value={formData.description}\n        onChange={handleInputChange}\n        error={!!errors.description}\n        helperText={errors.description}\n        multiline\n        rows={4}\n      />\n      <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n        Edit Photo\n      </Button>\n    </form>\n  );\n};\nexport default EditPhotoForm;\n"],"names":["EditPhotoForm","navigate","useNavigate","location","useLocation","queryParams","album_id","photo_id","photo_name","photo_desc","useEffect","setFormData","prevFormData","formData","useState","errors","setErrors","handleInputChange","e","name","value","prevData","handleSubmit","isValid","newErrors","payload","response","fetchPutDataWithAuth","error","jsxs","jsx","TextField","Button"],"mappings":"2LAKA,MAAMA,EAAgB,IAAM,CAC1B,MAAMC,EAAWC,EAAA,EAETC,EAAWC,EAAA,EACXC,EAAc,IAAI,gBAAgBF,EAAS,MAAM,EACjDG,EAAWD,EAAY,IAAI,UAAU,EACrCE,EAAWF,EAAY,IAAI,UAAU,EACrCG,EAAaH,EAAY,IAAI,YAAY,EAC/C,IAAII,EAAaJ,EAAY,IAAI,YAAY,EAE/CK,EAAAA,UAAU,IAAM,CACK,aAAa,QAAQ,OAAO,GAE7CT,EAAS,QAAQ,EAGnBU,EAAYC,IAAgB,CAC1B,GAAGA,EACH,KAAMJ,GAAc,GACpB,YAAaC,IAAe,OAAS,GAAKA,GAAc,EAAA,EACxD,CACJ,EAAG,CAACR,EAAUO,EAAYC,CAAU,CAAC,EAErC,KAAM,CAACI,EAAUF,CAAW,EAAIG,WAAS,CACvC,KAAM,GACN,YAAa,EAAA,CACd,EACK,CAACC,EAAQC,CAAS,EAAIF,WAAS,CACnC,KAAM,GACN,YAAa,EAAA,CACd,EAEKG,EAAqBC,GAAM,CAC/B,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAA,EAAUF,EAAE,OAC1BP,EAAaU,IAAc,CACzB,GAAGA,EACH,CAACF,CAAI,EAAGC,CAAA,EACR,CACJ,EAEME,EAAe,MAAOJ,GAAM,CAChCA,EAAE,eAAA,EAGF,IAAIK,EAAU,GACd,MAAMC,EAAY,CAAE,KAAM,GAAI,YAAa,EAAA,EAgB3C,GAdKX,EAAS,KAAK,SACjBW,EAAU,KAAO,mBACjBD,EAAU,IAGPV,EAAS,YAAY,SACxBW,EAAU,YAAc,0BACxBD,EAAU,IAGZP,EAAUQ,CAAS,EAIfD,EAAS,CACX,MAAME,EAAU,CACd,KAAMZ,EAAS,KACf,YAAaA,EAAS,WAAA,EAExB,GAAI,CACF,MAAMa,EAAU,MAAMC,EAAqB,WAAWrB,EAAS,WAAWC,EAAS,iBAAkBkB,CAAO,EAC5G,QAAQ,IAAI,gBAAiBC,CAAQ,EACrCzB,EAAS,SAAS,CACpB,OAAS2B,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC9C,CACF,CACF,EACA,OACEC,EAAAA,KAAC,OAAA,CAAK,SAAUP,EACd,SAAA,CAAAQ,EAAAA,IAACC,EAAA,CACC,QAAQ,WACR,OAAO,SACP,UAAS,GACT,MAAM,OACN,KAAK,OACL,MAAOlB,EAAS,KAChB,SAAUI,EACV,MAAO,CAAC,CAACF,EAAO,KAChB,WAAYA,EAAO,IAAA,CAAA,EAErBe,EAAAA,IAACC,EAAA,CACC,QAAQ,WACR,OAAO,SACP,UAAS,GACT,MAAM,cACN,KAAK,cACL,MAAOlB,EAAS,YAChB,SAAUI,EACV,MAAO,CAAC,CAACF,EAAO,YAChB,WAAYA,EAAO,YACnB,UAAS,GACT,KAAM,CAAA,CAAA,EAERe,EAAAA,IAACE,GAAO,QAAQ,YAAY,MAAM,UAAU,KAAK,SAAS,SAAA,YAAA,CAE1D,CAAA,EACF,CAEJ"}